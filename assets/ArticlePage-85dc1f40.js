import{r as i,j as s,L as h,u,m as o}from"./index-a403b99a.js";import{o as N}from"./clientApis-5f80f00b.js";import{u as f}from"./useMessage-7cf4c234.js";import{P as v}from"./Pagination-81de4936.js";import{u as y}from"./useDispatch-d0a469ac.js";import"./react-toastify.esm-4c2505fc.js";const b=i.memo(({article:e})=>{var r;return s.jsxs("article",{className:"card  h-100",children:[s.jsx("div",{className:"product-card-img-container ",children:s.jsx(h,{to:`/article/${e.id}`,className:"",children:s.jsx("img",{src:e.image,className:"product-card-img",alt:e.title,style:{height:"250px",width:"100%"}})})}),s.jsxs("div",{className:"card-body",children:[s.jsx("h2",{className:"card-title fs-5",children:e.title}),s.jsx("p",{className:"card-text  fs-7 my-4",children:e.description}),s.jsx("time",{className:"card-text text-muted fs-7 mb-2 ",children:new Date(e.create_at).toLocaleString(void 0,{year:"numeric",month:"long",day:"numeric"})}),s.jsxs("div",{className:"card-text mb-2",children:["發表於：",e.author]}),s.jsx("div",{className:"d-flex flex-wrap",children:(r=e==null?void 0:e.tag)==null?void 0:r.map(t=>s.jsxs("span",{className:"fs-7 text-muted me-2 my-0 ",children:["#",t]},t))})]}),s.jsx("div",{className:"card-footer p-0 m-0",children:s.jsx(h,{to:`/article/${e.id}`,className:"btn btn-primary btn-primary-hover w-100 ",role:"button",children:"閱讀更多"})})]})}),E=()=>{const[e,r]=i.useState([]),[t,p]=i.useState({}),g=u(c=>c.loading),d=y(),{inputToastMessage:j}=f(),l=i.useCallback(async c=>{var n,m,x;try{d(o(!0));const a=await N(c);r((n=a==null?void 0:a.data)==null?void 0:n.articles),p((m=a==null?void 0:a.data)==null?void 0:m.pagination),d(o(!1))}catch(a){j((x=a==null?void 0:a.response)==null?void 0:x.data),d(o(!1))}},[]);return i.useEffect(()=>{l()},[l]),s.jsx("div",{className:"container mt-5 py-3 mb-3",children:g.isLoading?s.jsx("div",{children:"資料加載中"}):e.length?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"row flex-column-reverse flex-md-row",children:s.jsx("div",{className:"col-12 col-md-12",children:s.jsx("div",{className:"row g-3 ",children:e==null?void 0:e.map((c,n)=>s.jsx("div",{className:"col-12 col-md-6 col-lg-4 col-xl-3",children:s.jsx(b,{article:c})},n))})})}),s.jsx("div",{className:"mt-5",children:s.jsx(v,{changePage:l,totalPage:t.total_pages,currentPage:t.current_page,isPre:t.has_pre,isNext:t.has_next})})]}):s.jsx("div",{children:"目前尚無文章"})})};export{E as default};
