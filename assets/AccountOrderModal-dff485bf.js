import{r as l,j as o,aa as qe}from"./index-d6027e9a.js";import{c as T,u as te,b as H,o as ve,s as _,d as xe,l as Te,e as Ye,r as we,f as Je,t as Qe}from"./TransitionWrapper-6b65f476.js";import{b as y,u as Ze,a as Se,c as ye,C as et,F as Ae}from"./useWillUnmount-78df848a.js";import{u as tt}from"./usePriceToTw-52f49fa7.js";function nt(){return l.useState(null)}function st(e){const n=l.useRef(null);return l.useEffect(()=>{n.current=e}),n.current}const ot=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",it=typeof document<"u",Me=it||ot?l.useLayoutEffect:l.useEffect,at=["as","disabled"];function lt(e,n){if(e==null)return{};var t={},s=Object.keys(e),i,a;for(a=0;a<s.length;a++)i=s[a],!(n.indexOf(i)>=0)&&(t[i]=e[i]);return t}function rt(e){return!e||e.trim()==="#"}function De({tagName:e,disabled:n,href:t,target:s,rel:i,role:a,onClick:u,tabIndex:d=0,type:m}){e||(t!=null||s!=null||i!=null?e="a":e="button");const r={tagName:e};if(e==="button")return[{type:m||"button",disabled:n},r];const g=h=>{if((n||e==="a"&&rt(t))&&h.preventDefault(),n){h.stopPropagation();return}u==null||u(h)},p=h=>{h.key===" "&&(h.preventDefault(),g(h))};return e==="a"&&(t||(t="#"),n&&(t=void 0)),[{role:a??"button",disabled:void 0,tabIndex:n?void 0:d,href:t,target:e==="a"?s:void 0,"aria-disabled":n||void 0,rel:e==="a"?i:void 0,onClick:g,onKeyDown:p},r]}const ct=l.forwardRef((e,n)=>{let{as:t,disabled:s}=e,i=lt(e,at);const[a,{tagName:u}]=De(Object.assign({tagName:t,disabled:s},i));return o.jsx(u,Object.assign({},i,a,{ref:n}))});ct.displayName="Button";const ut=e=>l.forwardRef((n,t)=>o.jsx("div",{...n,ref:t,className:T(n.className,e)})),Le=l.forwardRef(({as:e,bsPrefix:n,variant:t="primary",size:s,active:i=!1,disabled:a=!1,className:u,...d},m)=>{const r=te(n,"btn"),[g,{tagName:p}]=De({tagName:e,disabled:a,...d}),h=p;return o.jsx(h,{...g,...d,ref:m,disabled:a,className:T(u,r,i&&"active",t&&`${r}-${t}`,s&&`${r}-${s}`,d.href&&a&&"disabled")})});Le.displayName="Button";const dt=Le;var ft=Function.prototype.bind.call(Function.prototype.call,[].slice);function k(e,n){return ft(e.querySelectorAll(n))}function Ce(e,n){if(e.contains)return e.contains(n);if(e.compareDocumentPosition)return e===n||!!(e.compareDocumentPosition(n)&16)}const ht="data-rr-ui-";function mt(e){return`${ht}${e}`}const Fe=l.createContext(H?window:void 0);Fe.Provider;function Ee(){return l.useContext(Fe)}var ee;function Ne(e){if((!ee&&ee!==0||e)&&H){var n=document.createElement("div");n.style.position="absolute",n.style.top="-9999px",n.style.width="50px",n.style.height="50px",n.style.overflow="scroll",document.body.appendChild(n),ee=n.offsetWidth-n.clientWidth,document.body.removeChild(n)}return ee}function he(e){e===void 0&&(e=ve());try{var n=e.activeElement;return!n||!n.nodeName?null:n}catch{return e.body}}function gt(e=document){const n=e.defaultView;return Math.abs(n.innerWidth-e.documentElement.clientWidth)}const Oe=mt("modal-open");class pt{constructor({ownerDocument:n,handleContainerOverflow:t=!0,isRTL:s=!1}={}){this.handleContainerOverflow=t,this.isRTL=s,this.modals=[],this.ownerDocument=n}getScrollbarWidth(){return gt(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(n){}removeModalAttributes(n){}setContainerStyle(n){const t={overflow:"hidden"},s=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();n.style={overflow:i.style.overflow,[s]:i.style[s]},n.scrollBarWidth&&(t[s]=`${parseInt(_(i,s)||"0",10)+n.scrollBarWidth}px`),i.setAttribute(Oe,""),_(i,t)}reset(){[...this.modals].forEach(n=>this.remove(n))}removeContainerStyle(n){const t=this.getElement();t.removeAttribute(Oe),Object.assign(t.style,n.style)}add(n){let t=this.modals.indexOf(n);return t!==-1||(t=this.modals.length,this.modals.push(n),this.setModalAttributes(n),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(n){const t=this.modals.indexOf(n);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(n))}isTopModal(n){return!!this.modals.length&&this.modals[this.modals.length-1]===n}}const je=pt,me=(e,n)=>H?e==null?(n||ve()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function vt(e,n){const t=Ee(),[s,i]=l.useState(()=>me(e,t==null?void 0:t.document));if(!s){const a=me(e);a&&i(a)}return l.useEffect(()=>{n&&s&&n(s)},[n,s]),l.useEffect(()=>{const a=me(e);a!==s&&i(a)},[e,s]),s}function xt({children:e,in:n,onExited:t,mountOnEnter:s,unmountOnExit:i}){const a=l.useRef(null),u=l.useRef(n),d=y(t);l.useEffect(()=>{n?u.current=!0:d(a.current)},[n,d]);const m=xe(a,e.ref),r=l.cloneElement(e,{ref:m});return n?r:i||!u.current&&s?null:r}function yt({in:e,onTransition:n}){const t=l.useRef(null),s=l.useRef(!0),i=y(n);return Me(()=>{if(!t.current)return;let a=!1;return i({in:e,element:t.current,initial:s.current,isStale:()=>a}),()=>{a=!0}},[e,i]),Me(()=>(s.current=!1,()=>{s.current=!0}),[]),t}function Et({children:e,in:n,onExited:t,onEntered:s,transition:i}){const[a,u]=l.useState(!n);n&&a&&u(!1);const d=yt({in:!!n,onTransition:r=>{const g=()=>{r.isStale()||(r.in?s==null||s(r.element,r.initial):(u(!0),t==null||t(r.element)))};Promise.resolve(i(r)).then(g,p=>{throw r.in||u(!0),p})}}),m=xe(d,e.ref);return a&&!n?null:l.cloneElement(e,{ref:m})}function ke(e,n,t){return e?o.jsx(e,Object.assign({},t)):n?o.jsx(Et,Object.assign({},t,{transition:n})):o.jsx(xt,Object.assign({},t))}function jt(e){return e.code==="Escape"||e.keyCode===27}const bt=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Rt(e,n){if(e==null)return{};var t={},s=Object.keys(e),i,a;for(a=0;a<s.length;a++)i=s[a],!(n.indexOf(i)>=0)&&(t[i]=e[i]);return t}let ge;function Tt(e){return ge||(ge=new je({ownerDocument:e==null?void 0:e.document})),ge}function wt(e){const n=Ee(),t=e||Tt(n),s=l.useRef({dialog:null,backdrop:null});return Object.assign(s.current,{add:()=>t.add(s.current),remove:()=>t.remove(s.current),isTopModal:()=>t.isTopModal(s.current),setDialogRef:l.useCallback(i=>{s.current.dialog=i},[]),setBackdropRef:l.useCallback(i=>{s.current.backdrop=i},[])})}const $e=l.forwardRef((e,n)=>{let{show:t=!1,role:s="dialog",className:i,style:a,children:u,backdrop:d=!0,keyboard:m=!0,onBackdropClick:r,onEscapeKeyDown:g,transition:p,runTransition:h,backdropTransition:ne,runBackdropTransition:K,autoFocus:se=!0,enforceFocus:w=!0,restoreFocus:oe=!0,restoreFocusOptions:ie,renderDialog:U,renderBackdrop:ae=f=>o.jsx("div",Object.assign({},f)),manager:le,container:re,onShow:S,onHide:P=()=>{},onExit:V,onExited:A,onExiting:G,onEnter:z,onEntering:X,onEntered:ce}=e,ue=Rt(e,bt);const E=Ee(),M=vt(re),v=wt(le),q=Ze(),D=st(t),[b,j]=l.useState(!t),x=l.useRef(null);l.useImperativeHandle(n,()=>v,[v]),H&&!D&&t&&(x.current=he(E==null?void 0:E.document)),t&&b&&j(!1);const Y=y(()=>{if(v.add(),N.current=Te(document,"keydown",fe),C.current=Te(document,"focus",()=>setTimeout(J),!0),S&&S(),se){var f,Z;const I=he((f=(Z=v.dialog)==null?void 0:Z.ownerDocument)!=null?f:E==null?void 0:E.document);v.dialog&&I&&!Ce(v.dialog,I)&&(x.current=I,v.dialog.focus())}}),L=y(()=>{if(v.remove(),N.current==null||N.current(),C.current==null||C.current(),oe){var f;(f=x.current)==null||f.focus==null||f.focus(ie),x.current=null}});l.useEffect(()=>{!t||!M||Y()},[t,M,Y]),l.useEffect(()=>{b&&L()},[b,L]),Se(()=>{L()});const J=y(()=>{if(!w||!q()||!v.isTopModal())return;const f=he(E==null?void 0:E.document);v.dialog&&f&&!Ce(v.dialog,f)&&v.dialog.focus()}),de=y(f=>{f.target===f.currentTarget&&(r==null||r(f),d===!0&&P())}),fe=y(f=>{m&&jt(f)&&v.isTopModal()&&(g==null||g(f),f.defaultPrevented||P())}),C=l.useRef(),N=l.useRef(),F=(...f)=>{j(!0),A==null||A(...f)};if(!M)return null;const Q=Object.assign({role:s,ref:v.setDialogRef,"aria-modal":s==="dialog"?!0:void 0},ue,{style:a,className:i,tabIndex:-1});let $=U?U(Q):o.jsx("div",Object.assign({},Q,{children:l.cloneElement(u,{role:"document"})}));$=ke(p,h,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:V,onExiting:G,onExited:F,onEnter:z,onEntering:X,onEntered:ce,children:$});let R=null;return d&&(R=ae({ref:v.setBackdropRef,onClick:de}),R=ke(ne,K,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:R})),o.jsx(o.Fragment,{children:qe.createPortal(o.jsxs(o.Fragment,{children:[R,$]}),M)})});$e.displayName="Modal";const Mt=Object.assign($e,{Manager:je});function Ct(e,n){return e.classList?!!n&&e.classList.contains(n):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+n+" ")!==-1}function Nt(e,n){e.classList?e.classList.add(n):Ct(e,n)||(typeof e.className=="string"?e.className=e.className+" "+n:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+n))}function Be(e,n){return e.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Ot(e,n){e.classList?e.classList.remove(n):typeof e.className=="string"?e.className=Be(e.className,n):e.setAttribute("class",Be(e.className&&e.className.baseVal||"",n))}const B={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class kt extends je{adjustAndStore(n,t,s){const i=t.style[n];t.dataset[n]=i,_(t,{[n]:`${parseFloat(_(t,n))+s}px`})}restore(n,t){const s=t.dataset[n];s!==void 0&&(delete t.dataset[n],_(t,{[n]:s}))}setContainerStyle(n){super.setContainerStyle(n);const t=this.getElement();if(Nt(t,"modal-open"),!n.scrollBarWidth)return;const s=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";k(t,B.FIXED_CONTENT).forEach(a=>this.adjustAndStore(s,a,n.scrollBarWidth)),k(t,B.STICKY_CONTENT).forEach(a=>this.adjustAndStore(i,a,-n.scrollBarWidth)),k(t,B.NAVBAR_TOGGLER).forEach(a=>this.adjustAndStore(i,a,n.scrollBarWidth))}removeContainerStyle(n){super.removeContainerStyle(n);const t=this.getElement();Ot(t,"modal-open");const s=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";k(t,B.FIXED_CONTENT).forEach(a=>this.restore(s,a)),k(t,B.STICKY_CONTENT).forEach(a=>this.restore(i,a)),k(t,B.NAVBAR_TOGGLER).forEach(a=>this.restore(i,a))}}let pe;function Bt(e){return pe||(pe=new kt(e)),pe}const St=ye("modal-body"),At=l.createContext({onHide(){}}),Ie=At,We=l.forwardRef(({bsPrefix:e,className:n,contentClassName:t,centered:s,size:i,fullscreen:a,children:u,scrollable:d,...m},r)=>{e=te(e,"modal");const g=`${e}-dialog`,p=typeof a=="string"?`${e}-fullscreen-${a}`:`${e}-fullscreen`;return o.jsx("div",{...m,ref:r,className:T(g,n,i&&`${e}-${i}`,s&&`${g}-centered`,d&&`${g}-scrollable`,a&&p),children:o.jsx("div",{className:T(`${e}-content`,t),children:u})})});We.displayName="ModalDialog";const _e=We,Dt=ye("modal-footer"),Lt=l.forwardRef(({closeLabel:e="Close",closeVariant:n,closeButton:t=!1,onHide:s,children:i,...a},u)=>{const d=l.useContext(Ie),m=y(()=>{d==null||d.onHide(),s==null||s()});return o.jsxs("div",{ref:u,...a,children:[i,t&&o.jsx(et,{"aria-label":e,variant:n,onClick:m})]})}),Ft=Lt,He=l.forwardRef(({bsPrefix:e,className:n,closeLabel:t="Close",closeButton:s=!1,...i},a)=>(e=te(e,"modal-header"),o.jsx(Ft,{ref:a,...i,className:T(n,e),closeLabel:t,closeButton:s})));He.displayName="ModalHeader";const $t=He,It=ut("h4"),Wt=ye("modal-title",{Component:It});function _t(e){return o.jsx(Ae,{...e,timeout:null})}function Ht(e){return o.jsx(Ae,{...e,timeout:null})}const Ke=l.forwardRef(({bsPrefix:e,className:n,style:t,dialogClassName:s,contentClassName:i,children:a,dialogAs:u=_e,"aria-labelledby":d,"aria-describedby":m,"aria-label":r,show:g=!1,animation:p=!0,backdrop:h=!0,keyboard:ne=!0,onEscapeKeyDown:K,onShow:se,onHide:w,container:oe,autoFocus:ie=!0,enforceFocus:U=!0,restoreFocus:ae=!0,restoreFocusOptions:le,onEntered:re,onExit:S,onExiting:P,onEnter:V,onEntering:A,onExited:G,backdropClassName:z,manager:X,...ce},ue)=>{const[E,M]=l.useState({}),[v,q]=l.useState(!1),D=l.useRef(!1),b=l.useRef(!1),j=l.useRef(null),[x,Y]=nt(),L=xe(ue,Y),J=y(w),de=Ye();e=te(e,"modal");const fe=l.useMemo(()=>({onHide:J}),[J]);function C(){return X||Bt({isRTL:de})}function N(c){if(!H)return;const O=C().getScrollbarWidth()>0,Re=c.scrollHeight>ve(c).documentElement.clientHeight;M({paddingRight:O&&!Re?Ne():void 0,paddingLeft:!O&&Re?Ne():void 0})}const F=y(()=>{x&&N(x.dialog)});Se(()=>{we(window,"resize",F),j.current==null||j.current()});const Q=()=>{D.current=!0},$=c=>{D.current&&x&&c.target===x.dialog&&(b.current=!0),D.current=!1},R=()=>{q(!0),j.current=Qe(x.dialog,()=>{q(!1)})},f=c=>{c.target===c.currentTarget&&R()},Z=c=>{if(h==="static"){f(c);return}if(b.current||c.target!==c.currentTarget){b.current=!1;return}w==null||w()},I=c=>{ne?K==null||K(c):(c.preventDefault(),h==="static"&&R())},Ue=(c,O)=>{c&&N(c),V==null||V(c,O)},Pe=c=>{j.current==null||j.current(),S==null||S(c)},Ve=(c,O)=>{A==null||A(c,O),Je(window,"resize",F)},Ge=c=>{c&&(c.style.display=""),G==null||G(c),we(window,"resize",F)},ze=l.useCallback(c=>o.jsx("div",{...c,className:T(`${e}-backdrop`,z,!p&&"show")}),[p,z,e]),be={...t,...E};be.display="block";const Xe=c=>o.jsx("div",{role:"dialog",...c,style:be,className:T(n,e,v&&`${e}-static`,!p&&"show"),onClick:h?Z:void 0,onMouseUp:$,"aria-label":r,"aria-labelledby":d,"aria-describedby":m,children:o.jsx(u,{...ce,onMouseDown:Q,className:s,contentClassName:i,children:a})});return o.jsx(Ie.Provider,{value:fe,children:o.jsx(Mt,{show:g,ref:L,backdrop:h,container:oe,keyboard:!0,autoFocus:ie,enforceFocus:U,restoreFocus:ae,restoreFocusOptions:le,onEscapeKeyDown:I,onShow:se,onHide:w,onEnter:Ue,onEntering:Ve,onEntered:re,onExit:Pe,onExiting:P,onExited:Ge,manager:C(),transition:p?_t:void 0,backdropTransition:p?Ht:void 0,renderBackdrop:ze,renderDialog:Xe})})});Ke.displayName="Modal";const W=Object.assign(Ke,{Body:St,Header:$t,Title:Wt,Footer:Dt,Dialog:_e,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),Gt=({show:e,handleClose:n,order:t})=>{var a,u,d,m;const{handlePriceToTw:s}=tt(),i=Object.entries(t.products?t.products:{}).map(r=>r[1]);return o.jsx("div",{children:o.jsxs(W,{show:e,onHide:n,size:"lg",children:[o.jsx(W.Header,{closeButton:!0,children:o.jsx(W.Title,{children:o.jsxs("span",{children:["訂單：",t.id]})})}),o.jsxs(W.Body,{children:[o.jsxs("div",{className:"row",children:[o.jsx("div",{className:"col-3",children:"姓名"}),o.jsx("div",{className:"col-9",children:(a=t==null?void 0:t.user)==null?void 0:a.name}),o.jsx("div",{className:"col-3 mt-2",children:"郵箱"}),o.jsx("div",{className:"col-9 mt-2",children:(u=t==null?void 0:t.user)==null?void 0:u.email}),o.jsx("div",{className:"col-3 mt-2",children:"連絡電話"}),o.jsx("div",{className:"col-9 mt-2",children:(d=t==null?void 0:t.user)==null?void 0:d.tel}),o.jsx("div",{className:"col-3 mt-2",children:"寄送地址"}),o.jsx("div",{className:"col-9 mt-2",children:(m=t==null?void 0:t.user)==null?void 0:m.address})]}),o.jsxs("table",{className:"table align-middle mt-5",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"名稱"}),o.jsx("th",{children:"數量"}),o.jsx("th",{children:"總價"}),o.jsx("th",{children:"折扣"})]})}),o.jsx("tbody",{children:i==null?void 0:i.map(r=>{var g,p,h;return o.jsxs("tr",{children:[o.jsx("td",{children:(g=r==null?void 0:r.product)==null?void 0:g.title}),o.jsx("td",{children:r==null?void 0:r.qty}),o.jsx("td",{children:s(r==null?void 0:r.final_total)}),o.jsx("td",{children:(p=r==null?void 0:r.coupon)!=null&&p.code?(h=r==null?void 0:r.coupon)==null?void 0:h.code:null})]},r.id)})}),o.jsx("tfoot",{children:o.jsx("tr",{children:o.jsxs("td",{className:"text-end fs-5 fw-bolder pe-4",colSpan:4,children:["合計：NT",s(t.total)]})})})]}),o.jsxs("p",{children:["訂單建立時間：",new Date(t.create_at*1e3).toLocaleString(void 0,{year:"numeric",month:"long",day:"numeric"})]}),o.jsxs("p",{children:["訂單狀態：",t.is_paid?o.jsx("span",{className:"text-success ",children:"付款完成"}):o.jsx("span",{children:"未付款"})]}),o.jsxs("p",{children:["訂單進度：",o.jsx("span",{className:`${t.is_paid?(t==null?void 0:t.status)==="1"?"text-dark":(t==null?void 0:t.status)==="2"?"text-warning":(t==null?void 0:t.status)==="3"?"text-success":"text-secondary":""}`,children:t.is_paid?(t==null?void 0:t.status)==="1"?"已確認":(t==null?void 0:t.status)==="2"?"寄送中":(t==null?void 0:t.status)==="3"?"已送達":"未確認":"未付款"})]})]}),o.jsx(W.Footer,{children:o.jsx(dt,{variant:"secondary",onClick:n,children:"離開"})})]})})};export{Gt as A,dt as B,W as M};
