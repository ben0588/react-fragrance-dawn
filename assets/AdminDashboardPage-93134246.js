import{d,k as p,u,l as h,r as f,m as c,e as n,n as g,j as s,N as o,O as x}from"./index-af9b00cf.js";import{b as j}from"./adminApis-e46386e6.js";import{k as N}from"./react-toastify.esm-e55456d1.js";/* empty css                      */import{R as y}from"./ReactBootstrapToast-c4d71e30.js";import{u as b}from"./useDispatch-d59d6dbe.js";import"./TransitionWrapper-44bac282.js";import"./setPrototypeOf-72fdee31.js";import"./useWillUnmount-3dbf43d2.js";const M=()=>{var l;const r=d(),m=p("/admin/dashboard"),t=b();u(a=>a.loading);const i=(l=document.cookie.split("; ").find(a=>a.startsWith("adminToken=")))==null?void 0:l.split("=")[1];return h.defaults.headers.common.Authorization=i,f.useEffect(()=>{if(i){if(!m)return}else return r("/admin");(async()=>{var a;try{t(c(!0));const e=await j();t(n({...e,message:"檢查權限成功"})),t(g(e)),t(c(!1))}catch(e){t(n((a=e==null?void 0:e.response)==null?void 0:a.data)),t(c(!1)),r("/admin")}})()},[i,r]),s.jsxs("div",{children:[s.jsxs("div",{className:"d-flex",style:{minHeight:"calc(100vh - 56px)"},children:[s.jsx("div",{className:"bg-light",style:{width:"200px"},children:s.jsxs("ul",{className:"list-group list-group-flush",children:[s.jsx(o,{className:"list-group-item list-group-item-action fw-bolder py-2",to:"products",children:"產品列表"}),s.jsx(o,{className:"list-group-item list-group-item-action fw-bolder py-2",to:"coupons",children:"優惠卷列表"}),s.jsx(o,{className:"list-group-item list-group-item-action fw-bolder py-2",to:"orders",children:"訂單列表"}),s.jsx(o,{className:"list-group-item list-group-item-action fw-bolder py-2",to:"article",children:"文章列表"})]})}),s.jsx("div",{className:"w-100",children:i&&s.jsx(x,{})})]}),s.jsx(N,{}),s.jsx(y,{})]})};export{M as default};
